# --- 起動チェック ---
WAIT 50
CMD show
EXPECT [STATE]

# --- モード遷移（EscでNORMAL）---
KEY escape
WAIT 30
DUMP_BOARD
KEY j
WAIT 30
DUMP_BOARD
KEY l
WAIT 30
DUMP_BOARD

# --- start / sfen / clear / undo の基本 ---
KEY i
WAIT 30
CMD start
EXPECT [OK]
CMD sfen
EXPECT [SFEN]
CMD clear
EXPECT [OK]
CMD undo
DUMP_SFEN

# --- 駒配置（pコマンド：大文字小文字・v・成り）---
CMD p 55 P
CMD p 54 vP
CMD p 53 +P
CMD p 52 v+R
DUMP_BOARD
CMD sfen
EXPECT [SFEN]

# --- 持駒設定（テキストコマンド）---
CMD h b G 1
EXPECT [OK]
CMD h w R 2
EXPECT [OK]
DUMP_BOARD

# --- 指し手（数字）---
# 成功ケース（初期局面）
CMD start
EXPECT [OK]
KEY i
WAIT 10
CMD 7776
EXPECT [OK]
CMD 3334
EXPECT [OK]
CMD undo
EXPECT [OK]
DUMP_SFEN

# 失敗ケース（盤面クリア後は当然エラーになる）
CMD clear
EXPECT [OK]
KEY i
WAIT 10
CMD 7776
EXPECT [ERR]

# --- 打ち（候補1つ）---
CMD clear
EXPECT [OK]
CMD p 55 K
EXPECT [OK]
CMD p 76 P
EXPECT [OK]
CMD h b P 1
EXPECT [OK]
KEY i
CMD 076
EXPECT [OK]
DUMP_BOARD
DUMP_SFEN

# --- KIF ---
CMD kif
EXPECT [KIF]
