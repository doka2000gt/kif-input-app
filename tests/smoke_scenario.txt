# --- 起動チェック ---
WAIT 50
CMD show
EXPECT [STATE]

# --- モード遷移（EscでNORMAL）---
KEY escape
WAIT 30
# カーソル移動（描画更新も含めて確認したいなら DUMP_BOARD を挟む）
DUMP_BOARD
KEY j
WAIT 30
DUMP_BOARD
KEY l
WAIT 30
DUMP_BOARD

# --- start / sfen / clear / undo の基本 ---
KEY i
WAIT 30
CMD start
EXPECT [OK]
CMD sfen
EXPECT [SFEN]
CMD clear
EXPECT [OK]
CMD undo
# undoが「戻せない」なら、その旨のログでもOK（ここは後でルール化）
DUMP_SFEN

# --- 駒配置（pコマンド：大文字小文字・v・成り）---
CMD p 55 P
CMD p 54 vP
CMD p 53 +P
CMD p 52 v+R
DUMP_BOARD
CMD sfen

# --- 持駒設定（h/H衝突確認も含む：ここはあなたの方針に合わせる）---
#CMD h b G 1    # 未実装（将来対応）
#CMD h w R 2
#DUMP_BOARD

# --- 指し手（数字）---
# 成功ケース（初期局面）
CMD start
EXPECT [OK]
KEY i
WAIT 10
CMD 7776
EXPECT [OK]
CMD 3334
EXPECT [OK]
CMD undo
EXPECT [OK]
DUMP_SFEN

# 失敗ケース（盤面クリア後は当然エラーになる）
CMD clear
EXPECT [OK]
KEY i
WAIT 10
CMD 7776
EXPECT [ERR]

# --- 打ち（候補1つ）---
CMD clear
EXPECT [OK]
CMD p 55 K
EXPECT [OK]
CMD p 76 P
EXPECT [OK]
CMD h b P 1
EXPECT [OK]    # ← h を仮実装していないならコメントアウト
KEY i
CMD 076
EXPECT [OK]
DUMP_BOARD
DUMP_SFEN


# --- KIF ---
CMD kif
EXPECT [KIF]
